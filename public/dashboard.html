<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mi Panel - Finzi</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap');
        * { font-family: 'Inter', sans-serif; }
        .gradient-bg { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
        .stat-card { transition: all 0.3s ease; }
        .stat-card:hover { transform: translateY(-5px); box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15); }
    </style>
</head>
<body class="bg-gray-50">

    <!-- NAVBAR -->
    <nav class="gradient-bg text-white shadow-lg">
        <div class="container mx-auto px-4 py-4">
            <div class="flex justify-between items-center">
                <div class="flex items-center space-x-2">
                    <svg class="w-8 h-8" fill="currentColor" viewBox="0 0 20 20">
                        <path d="M8.433 7.418c.155-.103.346-.196.567-.267v1.698a2.305 2.305 0 01-.567-.267C8.07 8.34 8 8.114 8 8c0-.114.07-.34.433-.582zM11 12.849v-1.698c.22.071.412.164.567.267.364.243.433.468.433.582 0 .114-.07.34-.433.582a2.305 2.305 0 01-.567.267z"/>
                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-13a1 1 0 10-2 0v.092a4.535 4.535 0 00-1.676.662C6.602 6.234 6 7.009 6 8c0 .99.602 1.765 1.324 2.246.48.32 1.054.545 1.676.662v1.941c-.391-.127-.68-.317-.843-.504a1 1 0 10-1.51 1.31c.562.649 1.413 1.076 2.353 1.253V15a1 1 0 102 0v-.092a4.535 4.535 0 001.676-.662C13.398 13.766 14 12.991 14 12c0-.99-.602-1.765-1.324-2.246A4.535 4.535 0 0011 9.092V7.151c.391.127.68.317.843.504a1 1 0 101.511-1.31c-.563-.649-1.413-1.076-2.354-1.253V5z" clip-rule="evenodd"/>
                    </svg>
                    <h1 class="text-2xl font-bold">Finzi</h1>
                </div>
                <div class="flex items-center space-x-4">
                    <span id="nombreUsuario" class="text-white font-semibold">Cargando...</span>
                    <button onclick="cerrarSesion()" class="px-4 py-2 bg-white/20 rounded-lg hover:bg-white/30 transition">
                        Cerrar Sesi√≥n
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- CONTENIDO PRINCIPAL -->
    <div class="container mx-auto px-4 py-8">
        
        <!-- HEADER DEL DASHBOARD -->
        <div class="mb-8">
            <h1 class="text-3xl font-bold text-gray-800 mb-2">
                ¬°Hola, <span id="nombreUsuarioBienvenida">Usuario</span>! üëã
            </h1>
            <p class="text-gray-600">Aqu√≠ est√° el resumen de tu actividad financiera</p>
        </div>

        <!-- TARJETAS DE ESTAD√çSTICAS -->
        <div class="grid md:grid-cols-4 gap-6 mb-8">
            <!-- Ahorro Actual -->
            <div class="stat-card bg-white rounded-xl p-6 shadow-lg">
                <div class="flex items-center justify-between mb-2">
                    <span class="text-gray-600 text-sm">Ahorro Actual</span>
                    <span class="text-2xl">üí∞</span>
                </div>
                <p id="ahorroActual" class="text-3xl font-bold text-gray-800">$0</p>
                <p class="text-xs text-gray-500 mt-1">Actualizado hoy</p>
            </div>

            <!-- Meta de Ahorro -->
            <div class="stat-card bg-white rounded-xl p-6 shadow-lg">
                <div class="flex items-center justify-between mb-2">
                    <span class="text-gray-600 text-sm">Meta de Ahorro</span>
                    <span class="text-2xl">üéØ</span>
                </div>
                <p id="metaAhorro" class="text-3xl font-bold text-purple-600">$0</p>
                <div id="progresoMeta" class="mt-2">
                    <div class="w-full bg-gray-200 rounded-full h-2">
                        <div id="barraProgreso" class="bg-purple-600 h-2 rounded-full" style="width: 0%"></div>
                    </div>
                    <p id="textoProgreso" class="text-xs text-gray-500 mt-1">0% alcanzado</p>
                </div>
            </div>

            <!-- Inversiones Activas -->
            <div class="stat-card bg-white rounded-xl p-6 shadow-lg">
                <div class="flex items-center justify-between mb-2">
                    <span class="text-gray-600 text-sm">Inversiones</span>
                    <span class="text-2xl">üìà</span>
                </div>
                <p id="totalInversiones" class="text-3xl font-bold text-green-600">0</p>
                <p class="text-xs text-gray-500 mt-1">Cuentas activas</p>
            </div>

            <!-- Comisiones Ganadas -->
            <div class="stat-card bg-gradient-to-br from-purple-500 to-purple-700 rounded-xl p-6 shadow-lg text-white">
                <div class="flex items-center justify-between mb-2">
                    <span class="text-white/80 text-sm">Plan Actual</span>
                    <span class="text-2xl">‚≠ê</span>
                </div>
                <p id="tipoPlan" class="text-2xl font-bold">Gratuito</p>
                <button onclick="mostrarPlanes()" class="text-xs text-white/80 mt-1 hover:text-white underline">
                    Mejorar plan
                </button>
            </div>
        </div>

        <!-- SECCI√ìN DE TABS -->
        <div class="bg-white rounded-xl shadow-lg overflow-hidden">
            <!-- Navegaci√≥n de Tabs -->
            <div class="flex border-b">
                <button onclick="cambiarTab('metas')" id="tabMetas" class="tab-btn flex-1 px-6 py-4 font-semibold text-purple-600 border-b-2 border-purple-600">
                    üéØ Mis Metas
                </button>
                <button onclick="cambiarTab('conversiones')" id="tabConversiones" class="tab-btn flex-1 px-6 py-4 font-semibold text-gray-600 hover:text-purple-600 hover:bg-gray-50">
                    üìä Historial
                </button>
                <button onclick="cambiarTab('perfil')" id="tabPerfil" class="tab-btn flex-1 px-6 py-4 font-semibold text-gray-600 hover:text-purple-600 hover:bg-gray-50">
                    üë§ Mi Perfil
                </button>
            </div>

            <!-- Contenido de Tabs -->
            <div class="p-6">
                
                <!-- TAB: MIS METAS -->
                <div id="contenidoMetas" class="tab-content">
                    <div class="flex justify-between items-center mb-6">
                        <h3 class="text-xl font-bold text-gray-800">Mis Metas de Ahorro</h3>
                        <button onclick="abrirModalNuevaMeta()" class="gradient-bg text-white px-4 py-2 rounded-lg font-semibold hover:opacity-90 transition">
                            + Nueva Meta
                        </button>
                    </div>

                    <!-- Lista de Metas -->
                    <div id="listaMetas" class="space-y-4">
                        <div class="text-center py-12 text-gray-500">
                            <p class="text-lg mb-2">No tienes metas a√∫n</p>
                            <p class="text-sm">Crea tu primera meta de ahorro para empezar</p>
                        </div>
                    </div>
                </div>

                <!-- TAB: HISTORIAL DE CONVERSIONES -->
                <div id="contenidoConversiones" class="tab-content hidden">
                    <h3 class="text-xl font-bold text-gray-800 mb-6">Historial de Inversiones</h3>
                    
                    <div id="tablaConversiones" class="overflow-x-auto">
                        <table class="w-full">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th class="px-4 py-3 text-left text-sm font-semibold text-gray-600">Fecha</th>
                                    <th class="px-4 py-3 text-left text-sm font-semibold text-gray-600">Opci√≥n</th>
                                    <th class="px-4 py-3 text-left text-sm font-semibold text-gray-600">Monto</th>
                                    <th class="px-4 py-3 text-left text-sm font-semibold text-gray-600">Estado</th>
                                </tr>
                            </thead>
                            <tbody id="bodyConversiones">
                                <tr>
                                    <td colspan="4" class="px-4 py-8 text-center text-gray-500">
                                        No tienes inversiones registradas a√∫n
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- TAB: MI PERFIL -->
                <div id="contenidoPerfil" class="tab-content hidden">
                    <h3 class="text-xl font-bold text-gray-800 mb-6">Informaci√≥n Personal</h3>
                    
                    <form id="formPerfil" class="max-w-2xl">
                        <div class="grid md:grid-cols-2 gap-6 mb-6">
                            <div>
                                <label class="block text-sm font-semibold text-gray-700 mb-2">Nombre completo</label>
                                <input type="text" id="perfilNombre" class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-purple-500 focus:outline-none">
                            </div>
                            <div>
                                <label class="block text-sm font-semibold text-gray-700 mb-2">Email</label>
                                <input type="email" id="perfilEmail" disabled class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg bg-gray-50">
                            </div>
                            <div>
                                <label class="block text-sm font-semibold text-gray-700 mb-2">Tel√©fono</label>
                                <input type="tel" id="perfilTelefono" class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-purple-500 focus:outline-none">
                            </div>
                            <div>
                                <label class="block text-sm font-semibold text-gray-700 mb-2">Fecha de nacimiento</label>
                                <input type="date" id="perfilFechaNacimiento" class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-purple-500 focus:outline-none">
                            </div>
                            <div>
                                <label class="block text-sm font-semibold text-gray-700 mb-2">Ahorro actual</label>
                                <input type="number" id="perfilAhorroActual" class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-purple-500 focus:outline-none" placeholder="0">
                            </div>
                            <div>
                                <label class="block text-sm font-semibold text-gray-700 mb-2">Tolerancia al riesgo</label>
                                <select id="perfilToleranciaRiesgo" class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-purple-500 focus:outline-none">
                                    <option value="bajo">Conservador (Bajo riesgo)</option>
                                    <option value="medio">Moderado (Riesgo medio)</option>
                                    <option value="alto">Agresivo (Alto riesgo)</option>
                                </select>
                            </div>
                        </div>

                        <button type="submit" class="gradient-bg text-white px-6 py-3 rounded-lg font-semibold hover:opacity-90 transition">
                            Guardar Cambios
                        </button>
                    </form>

                    <div class="mt-8 pt-8 border-t">
                        <h4 class="text-lg font-bold text-gray-800 mb-4">C√≥digo de Referido</h4>
                        <div class="flex items-center space-x-4">
                            <input type="text" id="codigoReferido" readonly class="flex-1 px-4 py-3 border-2 border-gray-300 rounded-lg bg-gray-50 font-mono">
                            <button onclick="copiarCodigo()" class="gradient-bg text-white px-6 py-3 rounded-lg font-semibold hover:opacity-90 transition">
                                Copiar
                            </button>
                        </div>
                        <p class="text-sm text-gray-600 mt-2">Comparte este c√≥digo y gana comisiones por cada referido</p>
                    </div>
                </div>

            </div>
        </div>

    </div>

    <!-- MODAL: NUEVA META -->
    <div id="modalNuevaMeta" class="hidden fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4">
        <div class="bg-white rounded-2xl max-w-md w-full p-8">
            <h3 class="text-2xl font-bold mb-6">Crear Nueva Meta</h3>
            <form id="formNuevaMeta">
                <div class="mb-4">
                    <label class="block text-sm font-semibold text-gray-700 mb-2">Nombre de la meta</label>
                    <input type="text" id="metaNombre" required class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-purple-500 focus:outline-none" placeholder="Ej: Viaje a Europa">
                </div>
                <div class="mb-4">
                    <label class="block text-sm font-semibold text-gray-700 mb-2">Monto objetivo</label>
                    <input type="number" id="metaMonto" required class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-purple-500 focus:outline-none" placeholder="50000">
                </div>
                <div class="mb-4">
                    <label class="block text-sm font-semibold text-gray-700 mb-2">Fecha objetivo</label>
                    <input type="date" id="metaFecha" required class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-purple-500 focus:outline-none">
                </div>
                <div class="mb-6">
                    <label class="block text-sm font-semibold text-gray-700 mb-2">Aporte mensual</label>
                    <input type="number" id="metaAporteMensual" class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-purple-500 focus:outline-none" placeholder="2000">
                </div>
                <button type="submit" class="w-full gradient-bg text-white py-3 rounded-lg font-bold hover:opacity-90 transition">
                    Crear Meta
                </button>
                <button type="button" onclick="cerrarModalNuevaMeta()" class="w-full mt-3 text-gray-600 py-2 hover:text-gray-800 transition">
                    Cancelar
                </button>
            </form>
        </div>
    </div>

    <script src="/dashboard.js"></script>
</body>
</html>